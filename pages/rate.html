<!DOCTYPE html>
<html>

<head>
    <title>TA Manager | McGill University</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="top-banner">
        <div class="logout-icon">
            <a href="javascript:void(0);" id="logout" onclick="">
                <i class="fa-solid fa-right-from-bracket"></i> Log Out
            </a>
        </div>

        <div class="user-icon">
            <i class="fa-solid fa-user-check"></i> jules.niyonkuru@mail.mcgill.ca
        </div>
    </div>

    <div class="cs-logo">
        <a href="dashboard.html"><img src="../assets/McGill-CS.png" alt="McGill Logo"></a>
    </div>

    <div class="header"></div>

    <div id="rate-container">
        <div class="rate-select">
            <h1 class="ta-name">TA</h1>

            <h3>Select a course:</h3>
            <div class="rate-option" id="course1">COMP 307</div>
            <div class="rate-option" id="course2">COMP 307</div>
        </div>
        <div class="rate-select">
            <h3>Select a term:</h3>
            <div class="rate-option" id="term1">Fall 2021</div>
            <div class="rate-option" id="term2">Winter 2022</div>
        </div>>
        <div class="rate-review">
            <h3>Rate this TA:</h3>
            <form id="form">
                <textarea placeholder="Write a review" id="review" rows="3" cols="50"></textarea> <br></br>             
                <input type="submit" value="Submit">
                <div id="sucess"></div>
            </form>
        </div>
    </div>

    <div class="footer">
        <div class="mcgill">
            McGill University
        </div>
        <div class="copyright">
            &copy; Lilia Haché, Adrien Philardeau, César Niyonkuru
        </div>
    </div>

</body>

<script>
    const form = document.getElementById('form');
    form.addEventListener('submit', feedback);

    function feedback(event){
        event.preventDefault();
        let review = document.getElementById("review");
        if (review.value === ""){
            review.style.border = "1px solid #ED1B2F";
        }
        else{
            review.value = "";
            document.getElementById("sucess").innerHTML = "Your review has been submitted.";
            review.style.border = "";
        }
    }
    loadCachedData();

    function loadCachedData(){
        let fields = ['ta_name', 'ta_mcgill_id', 'ta_current_courses', 'ta_past_courses'];
        let courses = []
        for (let i=0; i<fields.length; i++){
            var curr = fields[i];
            storedValue = sessionStorage.getItem(curr);
            if (storedValue !== null){ 
                if (curr==='ta_name') {
                    console.log("got here");
                    let temp = document.getElementsByClassName('ta-name')[0];
                    temp.innerHTML = "Rate " + storedValue;
                    // let ta_names = storedValue.split(" ");
                    // let ta_email = ta_names.join('.')+"@mail.mcgill.ca"
                    // document.getElementById('ta-email').innerHTML = ta_email;
                    // document.getElementById('email-href').setAttribute("href",`mailto:${ta_email}`); 
                }else if (curr==='ta_current_courses' || curr === 'ta_past_courses') {
                    courses.push(storedValue)
                }
            }              
        }
        document.getElementById('course1').innerHTML = courses[0];
        document.getElementById('course2').innerHTML = courses[1];


        //Clear the session storage values for a better experience with register later
        for (let i=0; i<fields.length; i++){
            curr = fields[i];
            storedValue = sessionStorage.getItem(curr);
            if (storedValue !== null){
                sessionStorage.removeItem(curr);
            }
        }
    }

</script>

</html>