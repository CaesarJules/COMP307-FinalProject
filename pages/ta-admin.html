<!DOCTYPE html>
<html>

<head>
    <title>TA Manager | McGill University</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="top-banner">
        <div class="logout-icon">
            <a href="javascript:void(0);" id="logout" onclick="">
                <i class="fa-solid fa-right-from-bracket"></i> Log Out
            </a>
        </div>

        <div class="user-icon">
            <i class="fa-solid fa-user-check"></i> jules.niyonkuru@mail.mcgill.ca
        </div>
    </div>

    <div class="cs-logo">
        <a href="dashboard.html"><img src="../assets/McGill-CS.png" alt="McGill Logo"></a>
    </div>

    <div class="header"></div>

    <div class="ta-container">
        <h1>TA Administration</h1>
        <p>The following table contains all TAs in the current cohort.</p>
        <p>Click on a TA's name for more information</p>
        <div id="ta-admin-header">
            <input oninput="return update_content()" id="search-ta-course" type="search" name="search-ta-course" placeholder="Search Name, ID or Course">
            <button onclick="location.href = '#';">Import TA Cohort</button>
            <button onclick="location.href = 'add-ta.html';">Add a TA</button>
        </div>
        <div>
            <table id="ta-database">
                <tr>
                <th>TA Name</th>
                <th>Student ID</th>
                <th>Current Courses</th>
                <th>Past Courses</th>
                </tr>
                <tr>
                    <td><a href="ta-detail.html">Ada Lovelace</a></td>
                    <td>123456789</td>
                    <td>COMP 303</td>
                    <td>COMP 202, COMP 250</td>
                </tr>
            </table>
        </div>
    </div>

    <div class="footer">
        <div class="mcgill">
            McGill University
        </div>
        <div class="copyright">
            &copy; Lilia Haché, Adrien Philardeau, César Niyonkuru
        </div>
    </div>
    
</body>

<script>
    var request = new XMLHttpRequest();
    request.open('GET', 'https://www.cs.mcgill.ca/~aphila/cgi-bin/ta-admin.py');
    request.onload = function(){
        var data = request.responseText;
        var htmlObject = document.createElement('div');
        htmlObject.innerHTML = data;
        //console.log(data);
        tags = htmlObject.getElementsByTagName("h2");
        //console.log(users);
        table = document.getElementById('table');
        var users = [];
        for (var i = 0; i < tags.length; i++){
            users.push(tags[i].innerHTML.split(','));
        }
        console.log(users)
        var htmlObject = document.createElement('div');
        htmlObject.innerHTML = data;

        for (var i = 0; i < users.length; i++){
            var newRow = table.insertRow(table.length);
            for(var j=0; j<users[i].length; j++){
                var cell = newRow.insertCell(j);
                cell.innerHTML = users[i][j];
            } 
        }           
    }
        
    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    request.send();

</script>

</html>